{"ast":null,"code":"import _defineProperty from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/josh/Documents/github_projects/todoapp/todo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/josh/Documents/github_projects/todoapp/todo-client/src/App.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Typography from '@material-ui/core/Typography';\nimport TodoForm from './TodoForm';\nimport TodoList from './TodoList';\nimport useTodoState from './useTodoState';\naxios.defaults.baseURL = \"http://127.0.0.1:8000/\"; //URL to django back end\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n}\n\nfunction setCookie(cname, cvalue, exdays) {\n  var d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  var expires = \"expires=\" + d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nvar ToDoContainer = function ToDoContainer() {\n  var _useTodoState = useTodoState([]),\n      todos = _useTodoState.todos,\n      addTodo = _useTodoState.addTodo,\n      deleteTodo = _useTodoState.deleteTodo;\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"Todos\"), React.createElement(TodoForm, {\n    saveTodo: function saveTodo(todoText) {\n      var trimmedText = todoText.trim();\n      console.log(todos);\n      xxxxxxxxxxxxxx;\n\n      if (trimmedText.length > 0) {\n        addTodo(trimmedText);\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(TodoList, {\n    todos: todos,\n    deleteTodo: deleteTodo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }));\n};\n\nvar Reg =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Reg, _React$Component);\n\n  function Reg(props) {\n    var _this;\n\n    _classCallCheck(this, Reg);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Reg).call(this, props));\n    _this.state = {\n      username: \"\",\n      email: \"\",\n      password1: \"\",\n      password2: \"\"\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.registerUser = _this.registerUser.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Reg, [{\n    key: \"handleChange\",\n    value: function handleChange(evt) {\n      this.setState(_defineProperty({}, evt.target.name, evt.target.value));\n    }\n  }, {\n    key: \"registerUser\",\n    value: function registerUser() {\n      var _this2 = this;\n\n      //http://127.0.0.1:8000/coreback/rest-auth/registration/\n      axios.post('coreback/rest-auth/registration/', {\n        //TODO:add CORS headers\n        username: this.state.username,\n        email: this.state.email,\n        password1: this.state.password1,\n        password2: this.state.password2\n      }).then(function (response) {\n        if (\"key\" in response.data) {\n          axios.defaults.headers.common['Authorization'] = response.data.key;\n          setCookie(\"Auth\", response.data.key, 3);\n\n          _this2.setState(function () {\n            return {\n              isAuthenticated: true\n            };\n          });\n\n          _this2.props.onLogin(true);\n        }\n      }).catch(function (error) {\n        console.log(error);\n\n        if (error.response.status === 400) {\n          alert(\"An error occured in registration\");\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"YOU WANNA MAKE AN ACCOUNT MAN?\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), \"username:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), \"email:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), \"password\", React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password1\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), \"confirm password\", React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password2\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.registerUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Register\"));\n    }\n  }]);\n\n  return Reg;\n}(React.Component);\n\nvar Profile =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(Profile, _React$Component2);\n\n  function Profile(props) {\n    var _this3;\n\n    _classCallCheck(this, Profile);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n    _this3.state = {\n      username: \"\"\n    };\n    return _this3;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      var config = {\n        headers: {\n          \"Authorization\": \"Token \" + getCookie(\"Auth\")\n        }\n      };\n      axios.get('coreback/profile/', config).then(function (response) {\n        // handle success\n        console.log(response);\n\n        _this4.setState(function () {\n          return {\n            username: response.data.fname\n          };\n        });\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n\n        _this4.setState(function () {\n          return {\n            isAuthenticated: false\n          };\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Hello:\", this.state.username), React.createElement(ToDoContainer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Profile;\n}(React.Component);\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(App, _React$Component3);\n\n  function App(props) {\n    var _this5;\n\n    _classCallCheck(this, App);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this5.onLogin = function (val) {\n      _this5.setState({\n        isAuthenticated: val\n      });\n    };\n\n    _this5.state = {\n      isAuthenticated: false\n    };\n    return _this5;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this6 = this;\n\n      var config = {\n        headers: {\n          \"Authorization\": \"Token \" + getCookie(\"Auth\")\n        }\n      };\n      axios.get('coreback/test_auth/', config).then(function (response) {\n        // handle success\n        console.log(response);\n\n        _this6.setState(function () {\n          return {\n            isAuthenticated: true\n          };\n        });\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n\n        _this6.setState(function () {\n          return {\n            isAuthenticated: false\n          };\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isAuthenticated) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }, React.createElement(Login, {\n          onLogin: this.onLogin,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }), React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, \"WELCOME TO YO HOMESCREEN BRO\"), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), React.createElement(Profile, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Login, {\n        onLogin: this.onLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), React.createElement(Reg, {\n        onLogin: this.onLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component4) {\n  _inherits(Login, _React$Component4);\n\n  function Login(props) {\n    var _this7;\n\n    _classCallCheck(this, Login);\n\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this7.state = {\n      email: \"\",\n      password: \"\",\n      redirectToReferrer: false,\n      isAuthenticated: false\n    };\n    _this7.handleChange = _this7.handleChange.bind(_assertThisInitialized(_this7));\n    _this7.login = _this7.login.bind(_assertThisInitialized(_this7));\n    _this7.logout = _this7.logout.bind(_assertThisInitialized(_this7));\n    return _this7;\n  }\n\n  _createClass(Login, [{\n    key: \"handleChange\",\n    value: function handleChange(evt) {\n      this.setState(_defineProperty({}, evt.target.name, evt.target.value));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this8 = this;\n\n      var config = {\n        headers: {\n          \"Authorization\": \"Token \" + getCookie(\"Auth\")\n        }\n      };\n      axios.get('coreback/test_auth/', config).then(function (response) {\n        // handle success\n        console.log(response);\n\n        _this8.setState(function () {\n          return {\n            isAuthenticated: true\n          };\n        });\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n\n        _this8.setState(function () {\n          return {\n            isAuthenticated: false\n          };\n        });\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var _this9 = this;\n\n      axios.post('coreback/rest-auth/logout/', {\n        headers: {\n          \"Authorization\": \"Bearer \" + getCookie(\"Auth\")\n        }\n      }).then(function (response) {\n        // handle success\n        console.log(response);\n        setCookie(\"Auth\", \"\", 0);\n\n        _this9.setState(function () {\n          return {\n            isAuthenticated: false\n          };\n        });\n\n        _this9.props.onLogin(false);\n      }).catch(function (error) {\n        // handle error\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login() {\n      var _this10 = this;\n\n      axios.post('coreback/rest-auth/login/', {\n        //TODO:add CORS headers\n        email: this.state.email,\n        password: this.state.password\n      }).then(function (response) {\n        if (\"key\" in response.data) {\n          axios.defaults.headers.common['Authorization'] = response.data.key;\n          setCookie(\"Auth\", response.data.key, 3);\n\n          _this10.setState(function () {\n            return {\n              isAuthenticated: true\n            };\n          });\n\n          _this10.props.onLogin(true);\n        }\n      }).catch(function (error) {\n        if (error.response.status === 400) {\n          if (\"email\" in error.response.data) {\n            alert(\"Please provide a valid email address\");\n          } else {\n            alert(\"Unable to login with provided credentials\");\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isAuthenticated) {\n        return React.createElement(\"button\", {\n          onClick: this.logout,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, \"Log out\");\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, \"You must log in to view the page\"), \"email:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }), \"password:\", React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"Log in\"));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default function AuthExample() {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, React.createElement(App, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/home/josh/Documents/github_projects/todoapp/todo-client/src/App.js"],"names":["React","axios","Typography","TodoForm","TodoList","useTodoState","defaults","baseURL","getCookie","cname","name","decodedCookie","decodeURIComponent","document","cookie","ca","split","i","length","c","charAt","substring","indexOf","setCookie","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","ToDoContainer","todos","addTodo","deleteTodo","todoText","trimmedText","trim","console","log","xxxxxxxxxxxxxx","Reg","props","state","username","email","password1","password2","handleChange","bind","registerUser","evt","setState","target","value","post","then","response","data","headers","common","key","isAuthenticated","onLogin","catch","error","status","alert","Component","Profile","config","get","fname","App","val","Login","password","redirectToReferrer","login","logout","AuthExample"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios';\nimport Typography from '@material-ui/core/Typography';\nimport TodoForm from './TodoForm';\nimport TodoList from './TodoList';\nimport useTodoState from './useTodoState';\naxios.defaults.baseURL = \"http://127.0.0.1:8000/\";//URL to django back end\n\nfunction getCookie(cname) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n  for(var i = 0; i <ca.length; i++) {\n    var c = ca[i];\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}\n\nfunction setCookie(cname, cvalue, exdays) {\n  var d = new Date();\n  d.setTime(d.getTime() + (exdays*24*60*60*1000));\n  var expires = \"expires=\"+ d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nconst ToDoContainer = () => {\n  const { todos, addTodo, deleteTodo } = useTodoState([]);\n\n  return (\n    <div className=\"App\">\n      <Typography component=\"h1\" variant=\"h2\">\n        Todos\n      </Typography>\n\n      <TodoForm\n        saveTodo={todoText => {\n          const trimmedText = todoText.trim();\n          console.log(todos);xxxxxxxxxxxxxx\n\n          if (trimmedText.length > 0) {\n            addTodo(trimmedText);\n          }\n        }}\n      />\n\n      <TodoList todos={todos} deleteTodo={deleteTodo} />\n    </div>\n  );\n};\n\nclass Reg extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      username:\"\",\n      email:\"\",\n      password1:\"\",\n      password2:\"\"\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.registerUser = this.registerUser.bind(this);\n  };\n\n  handleChange (evt) {\n    this.setState({ [evt.target.name]: evt.target.value});\n  }\n  registerUser () {\n    //http://127.0.0.1:8000/coreback/rest-auth/registration/\n    axios.post('coreback/rest-auth/registration/',{ //TODO:add CORS headers\n      username:this.state.username,\n      email:this.state.email,\n      password1:this.state.password1,\n      password2:this.state.password2\n    }).then((response) => {\n      if(\"key\" in response.data){\n        axios.defaults.headers.common['Authorization'] = response.data.key;\n        setCookie(\"Auth\", response.data.key, 3);\n        this.setState(() => ({\n          isAuthenticated: true\n        }))\n        this.props.onLogin(true);\n      }\n    }).catch((error) => {\n      console.log(error);\n      if(error.response.status === 400){\n        alert(\"An error occured in registration\");\n      }\n    });\n  }\n  render() {\n    return (\n      <div>\n        <h1>YOU WANNA MAKE AN ACCOUNT MAN?</h1><br/>\n        username:<input type=\"text\" name=\"username\" onChange={this.handleChange} /><br/>\n        email:<input type=\"text\" name=\"email\" onChange={this.handleChange} /><br/>\n        password<input type=\"password\" name=\"password1\" onChange={this.handleChange} /><br/>\n        confirm password<input type=\"password\" name=\"password2\" onChange={this.handleChange} /><br/>\n        <button onClick={this.registerUser}>Register</button>\n      </div>\n      )\n  }\n\n}\n\nclass Profile extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      username:\"\"\n    }\n  };\n  componentDidMount (){\n    let config = {\n      headers: {\n        \"Authorization\": \"Token \"+getCookie(\"Auth\")\n      }\n    }\n    axios.get('coreback/profile/',config\n      ).then((response) => {\n      // handle success\n      console.log(response);\n      this.setState(() => ({\n          username: response.data.fname\n      }))\n    })\n    .catch((error) => {\n      // handle error\n      console.log(error);\n      this.setState(() => ({\n          isAuthenticated: false\n      }))  \n    })\n  }    \n  render() {\n    return (<div><h1>Hello:{this.state.username}</h1><ToDoContainer/></div>)\n  }\n\n}\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      isAuthenticated:false\n    }\n  };\n  onLogin = (val) => {\n    this.setState({\n      isAuthenticated: val\n    })\n  };\n  componentDidMount (){\n    let config = {\n      headers: {\n        \"Authorization\": \"Token \"+getCookie(\"Auth\")\n      }\n    }\n    axios.get('coreback/test_auth/',config\n      ).then((response) => {\n      // handle success\n      console.log(response);\n      this.setState(() => ({\n          isAuthenticated: true\n      }))\n    })\n    .catch((error) => {\n      // handle error\n      console.log(error);\n      this.setState(() => ({\n          isAuthenticated: false\n      }))  \n    })\n  }\n  render() {\n\n    if (this.state.isAuthenticated){\n      return (<div>\n                <Login onLogin={this.onLogin} />\n                <h1>WELCOME TO YO HOMESCREEN BRO</h1><br/>\n                <Profile />\n              </div>)\n    }\n    \n    return (\n      <div>\n        <Login onLogin={this.onLogin} />\n        <Reg onLogin={this.onLogin} />\n      </div>\n    )\n  }\n}\n\nclass Login extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      email:\"\",\n      password:\"\",\n      redirectToReferrer: false,\n      isAuthenticated:false\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n  handleChange (evt) {\n    this.setState({ [evt.target.name]: evt.target.value});\n  }\n  componentDidMount (){\n    let config = {\n      headers: {\n        \"Authorization\": \"Token \"+getCookie(\"Auth\")\n      }\n    }\n    axios.get('coreback/test_auth/',config\n      ).then((response) => {\n      // handle success\n      console.log(response);\n      this.setState(() => ({\n          isAuthenticated: true\n      }))\n    })\n    .catch((error) => {\n      // handle error\n      console.log(error);\n      this.setState(() => ({\n          isAuthenticated: false\n      }))  \n    })\n  }\n  logout (){\n\n    axios.post('coreback/rest-auth/logout/',\n      {\n        headers: { \n          \"Authorization\": \"Bearer \" + getCookie(\"Auth\")\n         }\n      }\n      ).then((response) => {\n      // handle success\n      console.log(response);\n      setCookie(\"Auth\", \"\", 0);\n      this.setState(() => ({\n        isAuthenticated: false\n      }))\n      this.props.onLogin(false);\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);   \n    })\n    \n  }\n  login (){\n    axios.post('coreback/rest-auth/login/',{ //TODO:add CORS headers\n      email:this.state.email,\n      password:this.state.password\n    }).then((response) => {\n      if(\"key\" in response.data){\n        axios.defaults.headers.common['Authorization'] = response.data.key;\n        setCookie(\"Auth\", response.data.key, 3);\n        this.setState(() => ({\n          isAuthenticated: true\n        }))\n        this.props.onLogin(true);\n      }\n    }).catch((error) => {\n      if(error.response.status === 400){\n        if(\"email\" in error.response.data){\n          alert(\"Please provide a valid email address\");\n        }\n        else{\n          alert(\"Unable to login with provided credentials\");\n        }\n      }\n    });\n\n  }\n  render() {\n\n    if (this.state.isAuthenticated){\n      return (<button onClick={this.logout}>Log out</button>)\n    }\n    \n    return (\n      <div>\n        <p>You must log in to view the page</p>\n        email:<input type=\"text\" name=\"email\" onChange={this.handleChange} />\n        password:<input type=\"password\" name=\"password\" onChange={this.handleChange} />\n        <button onClick={this.login}>Log in</button>\n      </div>\n    )\n  }\n}\n\n\nexport default function AuthExample () {\n  return (\n    <div>\n      <App />\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}